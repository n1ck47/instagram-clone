{"version":3,"sources":["firebase.js","Components/Navbar/Navbar.js","Components/Add/CreatePost.js","actions.js","Components/Storycard/Storycard.js","Components/Story/Story.js","Components/Postcard/Postcard.js","Components/Profile/Profile.js","Components/Feed/Feed.js","Reducer/bookmarkReducer.js","Reducer/feedReducer.js","Reducer/postReducer.js","Reducer/storyReducer.js","Reducer/upvoteReducer.js","Reducer/userReducer.js","Reducer/downvoteReducer.js","Reducer/index.js","Reducer/loginReducer.js","Components/Login/Login.js","Components/Signup/Signup.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","storage","auth","Navbar","handleLogout","signOut","props","history","push","state","showSearch","userSearch","searchRef","React","createRef","value","this","current","toLowerCase","collection","orderBy","limit","startAt","endAt","get","then","snapshot","users","forEach","doc","data","user","username","fullName","profileImg","userId","id","setState","className","to","alt","style","styles","image","src","icon","onClick","currentUser","isOpen","onRequestClose","onChange","handleChange","ref","type","placeholder","length","map","u","i","height","widht","borderRadius","Component","width","withRouter","CreatePost","e","s","target","files","reader","FileReader","file","onload","f","img","result","substring","isVideo","loading","excessDuration","opacity","readAsDataURL","handleClick","filter","selectStory","feedClass","storyClass","selectFeed","handleVideo","duration","videoRef","onUpload","storageRef","time","Date","getTime","fileRef","child","name","split","caption","captionRef","put","x","bucket","_delegate","fileName","fullPath","url","posts","stories","key","post","noOfUpvotes","update","loadingModal","story","maxLength","inp","onTimeUpdate","controls","muted","autoPlay","autoPlayx","filtersClass","maxWidth","objectFit","backgroundColor","updateUser","updatePost","updateBookmark","bookmarks","updateUpvote","upvotes","updateDownvote","downvotes","Storycard","convertMS","milliseconds","hour","minute","seconds","Math","floor","answer","handleStoryClick","isModalOpened","interval","setInterval","index","clearInterval","handleModalClose","t","delay","placement","arrow","content","tippy","marginLeft","color","fontWeight","padding","border","marginRight","fontSize","Story","store","following","temp","sort","a","b","Object","keys","count","uId","doc2","data2","dispatch","updateStory","Postcard","day","week","month","year","handleUpvote","getState","upvoteState","downvoteState","p","isUpvoted","isDownvoted","inde","upvotePost","handleDownvote","handleBookmark","bookmarkState","isBookmarked","bookmarkPost","handleDelete","deletePost","handleEditClick","editSelected","handleEdit","modifyPost","handleComment","comment","commentRef","commentEnter","handleCommentEnter","onlineUserId","onlineUsername","onlineProfileImg","k","undefined","postState","subscribe","forceUpdate","componentDidMount","catch","handleCommentClick","isModalOpen","isComment","comments","isCommentModal","commentModal","commentsArr","oldTime","currentTime","profile","textDecoration","marginTop","abs","c","Modal","setAppElement","Profile","allPosts","deletedUserPosts","handleModalClick","isOpened","handleFollowing","isFollowing","postUserId","noOfFollowers","followers","handleUsername","usernameRef","where","empty","updateProfile","displayName","alert","handleName","nameRef","handlePassword","password","passwordRef","updatePassword","error","handleBio","bio","bioRef","settingsModal","photoURL","noOfPosts","noOfFollowing","followersModal","followingModal","postFullname","postProfileImg","onlineFullname","match","fol","newFollowers","newFollowing","c1","c2","Feed","defaultState","allReducers","combineReducers","action","feedState","feed","storyState","userState","loginModal","Login","handleForm","preventDefault","email","emailRef","signInWithEmailAndPassword","cred","err","message","onSubmit","Signup","createUserWithEmailAndPassword","newUserData","uid","set","marginBottom","App","useState","setUserId","setProfileImg","setUsername","setLoading","createStore","onAuthStateChanged","exact","path","render","params","X","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.882738e8.chunk.js","sourcesContent":["import firebase from 'firebase';\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyB6tjZFLDVp0RonzzJVYQmXWfmva78oUC0\",\n    authDomain: \"instagram-clone-a3ccf.firebaseapp.com\",\n    projectId: \"instagram-clone-a3ccf\",\n    storageBucket: \"instagram-clone-a3ccf.appspot.com\",\n    messagingSenderId: \"668991879038\",\n    appId: \"1:668991879038:web:c8786f0d0c6bdcc6ffa52f\"\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\nexport const auth = firebase.auth();\n\n// var firebaseConfig = {\n//   apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n//   authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n//   projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n//   storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n//   messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n//   appId: process.env.REACT_APP_FIREBASE_APP_ID\n// };","import React from 'react';\nimport {withRouter} from 'react-router'\nimport {Link} from 'react-router-dom';\nimport './Navbar.css'\nimport {auth,db} from '../../firebase'\nimport Modal from 'react-modal';\n\nclass Navbar extends React.Component{\n\n    constructor(){\n        super();\n        this.state={\n            showSearch:false,\n            userSearch:[]\n        }\n        this.searchRef=React.createRef();\n    }\n\n    handleLogout = () => {\n        auth.signOut();\n        this.props.history.push('/');\n\n    }\n\n    handleChange(){\n        let value = this.searchRef.current.value;\n        value=value.toLowerCase();\n        if(value!==''){\n            db.collection('users').orderBy('username').limit(30).startAt(value).endAt(value+'\\uf8ff').get().then((snapshot)=>{\n                let users=[];\n                snapshot.forEach((doc)=>{\n                    const data = doc.data();\n                    const user = {\n                        username:data.username,\n                        fullName:data.fullName,\n                        profileImg:data.profileImg,\n                        userId:doc.id\n                    }\n                    users.push(user);\n                })\n                this.setState({userSearch:users});\n            })\n        }else{\n            this.setState({userSearch:[]})\n        }\n    }\n\n    render(){\n        const {showSearch,userSearch} = this.state;\n        return (\n            <>\n                <div className='nav'>\n                    <Link to='/'><img alt='instagram-logo' style={styles.image} \n                        src='https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png' /></Link>\n                    <ul>\n                        <li><img alt='search' style={styles.icon} onClick={()=>this.setState({showSearch:true,userSearch:[]})} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fsearch.svg?alt=media&token=c032ad00-a479-40f4-9309-4bf2c4ce9252'/></li>\n                        <li><Link to='/'><img alt='home' style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fhome.svg?alt=media&token=655113dd-cee4-496d-8b83-ee79eb0758a9' /></Link></li>\n                        {/* <li><Link to='/upvotes'><img style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fheart.svg?alt=media&token=6013e70e-67aa-42d5-b4ff-ebc219696aff' /></Link></li> */}\n                        {/* <li><Link to='/bookmarks'><img style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fbookmark.svg?alt=media&token=62faef86-4543-4d35-a7eb-4db68656a4d0' /></Link></li> */}\n                        <li><Link to='/add'><img alt='add' style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fadd.svg?alt=media&token=341c58f6-d0a8-444f-837a-1970c5cf7b7e' /></Link></li>\n                        <li><Link to='/profile'><img alt='profile' style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fprofile.svg?alt=media&token=588c8992-ee44-43f5-a462-43b3cf2fb198' /></Link></li>\n                        <li onClick={this.handleLogout}>Log out</li>\n                        {auth.currentUser===null && <Link to='/login'><li>Log In</li></Link>}\n                    </ul>\n                </div>\n                <Modal isOpen={showSearch} onRequestClose={()=>this.setState({showSearch:false})} className='search-modal'>\n                    <div className='search-main'>\n                        <div className='search-outer'>\n                            <input onChange={()=>this.handleChange()} ref={this.searchRef} className='search' type='text' placeholder='Search' />\n                        </div>\n                        {userSearch.length>0 &&  <div className='search-result'>\n                            {userSearch.map((u,i)=>{\n                                return (\n                                        <Link to={`/profile-${u.username}`}>\n                                            <div className='search-result-item'>\n                                                <div className='search-result-item-img'>\n                                                    <img alt='profile' style={{height:45,widht:45,borderRadius:50}}src={u.profileImg} />\n                                                </div>\n                                                <div className='search-result-item-name'>\n                                                    <div className='search-result-item-username'>{u.username}</div>\n                                                    <div className='search-result-item-fullname'>{u.fullName}</div>\n                                                </div>\n                                            </div>\n                                        </Link>\n                                    )\n                            })}\n                        </div>}\n                    </div>\n                </Modal>\n            </>\n        )\n    }\n}\n\nconst styles = {\n    image:{\n        height:30,\n        width:100\n    },\n    icon:{\n        height:20,\n        width:20\n    }\n}\n\nexport default withRouter(Navbar);","import React from 'react';\nimport {storage,db} from '../../firebase.js';\nimport { withRouter } from 'react-router-dom';\nimport Modal from 'react-modal'\nimport './CreatePost.css'\n\n\nclass CreatePost extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            img:'',\n            loading:true,\n            filter:'',\n            feedClass:'selected',\n            storyClass:'not-selected',\n            excessDuration:false,\n            opacity:true,\n            isVideo:false,\n            file:[],\n            loadingModal:false\n        }\n        this.videoRef = React.createRef();\n        this.captionRef = React.createRef();\n        \n    }\n    onChange = (e,s) =>{\n        if(e.target.files.length>0){\n        let reader = new FileReader();\n        s.setState({file:e.target.files[0]})\n        reader.onload = function (f) {\n            let img = f.target.result;\n            if(f.target.result.substring(5,10)==='image'){\n                s.setState({isVideo:false})\n            }\n            if(f.target.result.substring(5,10)==='video'){\n                s.setState({isVideo:true})\n            }\n            s.setState({img,loading:false,excessDuration:false,opacity:true});\n        }\n        \n        reader.readAsDataURL(e.target.files[0]);}\n    }\n\n    handleClick = (filter) => {\n        this.setState({filter:filter[1]})\n    }\n\n    selectStory = () => {\n        this.setState({\n            feedClass:'not-selected',\n            storyClass:'selected'\n        })\n    }\n\n    selectFeed = () => {\n        this.setState({\n            storyClass:'not-selected',\n            feedClass:'selected'\n        })\n    }\n\n    handleVideo = () => {\n        let {duration} = this.videoRef.current\n        let {feedClass} = this.state;\n        if(feedClass==='selected'){\n            if(duration>60){\n                this.setState({excessDuration:true,opacity:true})\n            }\n            else{\n                this.setState({excessDuration:false,opacity:false})\n            }\n        }\n        else{\n            if(duration>15){\n                this.setState({excessDuration:true,opacity:true})\n            }\n            else{\n                this.setState({excessDuration:false,opacity:false})\n            }\n        }\n    }\n\n    onUpload = (s) => {\n        const {file} = this.state;\n        const storageRef = storage.ref();\n        const {username,userId} = s.props;\n        const d = new Date();\n        const time = d.getTime();\n        const fileRef = storageRef.child(`${username}${time}.`+file.name.split('.')[1]);\n        let caption = '';\n        if(this.captionRef.current!==null){\n            caption = this.captionRef.current.value;\n        }\n        fileRef.put(file).then((x)=>{\n            const bucket = x.ref._delegate.bucket;\n            const fileName = x.ref._delegate.fullPath;\n            const url = `https://firebasestorage.googleapis.com/v0/b/${bucket}/o/${fileName}?alt=media`;\n            let posts = [];\n            let data = {};\n            let stories = [];\n            const {feedClass} = this.state;\n            if(feedClass==='selected'){\n                db.collection('users').doc(userId).get().then((doc)=>{\n                    data = doc.data();\n                    posts = data['posts']\n                }).then(()=>{\n                    const key = username+time;\n                    const post = {\n                        image: url,\n                        isVideo: this.state.isVideo,\n                        time : time,\n                        caption,\n                        key,\n                        noOfUpvotes:0,\n                        userId,\n                        username,\n                        profileImg: data.profileImg,\n                        filter: s.state.filter\n                    }\n                    posts.push(post);\n                    db.collection('users').doc(userId).update({\n                        posts\n                    })\n                }).then(()=>{\n                    this.setState({loadingModal:false})\n                    this.props.history.push('/')})\n            }\n            else{\n                db.collection('users').doc(userId).get().then((doc)=>{\n                    data = doc.data();\n                    stories = data['stories']\n                }).then(()=>{\n                    const d = new Date();\n                    const time = d.getTime();\n                    const key = username+time;\n                    const story = {\n                        image: url,\n                        isVideo: this.state.isVideo,\n                        time : time,\n                        key,\n                        userId,\n                        username,\n                        profileImg: data.profileImg,\n                        filter: s.state.filter\n                    }\n                    stories.push(story);\n                    db.collection('users').doc(userId).update({\n                        stories\n                    })\n                }).then(()=>{\n                    this.setState({loadingModal:false})\n                    this.props.history.push('/')})\n            }\n        })\n        this.setState({loadingModal:true})\n    }\n\n    render(){\n        const {img,loading,filter,feedClass,storyClass,excessDuration,opacity,isVideo,loadingModal} = this.state;\n        return (\n            <div className='add-post-outer'>\n                <div className='add-post'>\n                    <div className='add-post-caption'>\n                        <textarea ref={this.captionRef} placeholder='Write a caption...' maxLength='100' />\n                    </div>\n                    <div className='inp-outer'>\n                        <img alt='upload' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fupload.svg?alt=media&token=3a19021b-1e72-486d-a964-2174a64980e5' className='inp-img'/>\n                        <input style={styles.inp} className='inp' type='file' onChange={(e)=>this.onChange(e,this)}/>\n                    </div>\n                    <div className='create-post-button'>\n                            <button onClick={()=>this.onUpload(this)}>Post</button>\n                    </div>\n                </div>\n                {loading && <div className='nav-post'>\n                            <div>\n                                <div className={storyClass} onClick={this.selectStory}>Story</div>\n                                <div className={feedClass} onClick={this.selectFeed}>Feed</div>\n                            </div>\n                </div> }\n                {(isVideo && !loading) &&\n                    <>\n                        \n                        <div className='main-post'>\n                        \n                        {\n                            feedClass==='selected' ? (!excessDuration ?\n                                <>\n                                <video ref={this.videoRef} className={opacity? \"opacity\" : \"\"} onTimeUpdate={this.handleVideo} width={styles.img.width}   style={styles.img} controls muted autoPlay>\n                                    <source src={img} type=\"video/mp4\" />\n                                </video>\n                                </> :   <div>Video Duration Exceed</div>)\n                                        :   (!excessDuration ?\n                                <>\n                                <video  ref={this.videoRef} className={opacity? \"opacity\" : \"\"} onTimeUpdate={this.handleVideo} width={styles.img.width}   style={styles.story} controls muted autoPlayx>\n                                    <source src={img} type=\"video/mp4\" />\n                                </video>\n                                </> : <div>Video Duration Exceed</div>)\n                            \n                        }\n                        </div>\n                    </>\n                }\n                {(!isVideo && !loading) &&\n                    <>\n                        <div className='main-post'>\n                            {feedClass==='selected' ? \n                                <figure className={filter} style={{width:'654px'}}><img alt='post' src={img} style={styles.img}/></figure>\n                                : <figure className={filter} style={{width:'400px'}}><img alt='post' src={img} style={styles.story}/></figure>}\n                        </div>\n                        <div className='post-filters-outer'>\n                            <div>FILTERS</div>\n                            <ul className='post-filters-inner'>\n                            {filtersClass.map((filter)=>{\n                                return <li key={filter[1]} onClick={()=>this.handleClick(filter)}><figure className={filter[1]} style={{width:'150px'}}><img alt='filters' src={img} style={styles.filter}/></figure><div>{filter[0]}</div></li>\n                            })\n                            }\n                            </ul>\n                        </div>\n                    </>\n                }\n                <Modal isOpen={loadingModal}  className='loading-modal' >\n                    <img alt='loading' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Floading.svg?alt=media&token=0159e16f-9cd1-4dd9-851d-fa3ad32a9896' />\n                </Modal>\n            </div>\n        )\n    }\n}\n\nconst styles = {\n    img:{\n        width:'654px',\n        maxWidth:'100%'\n    },\n    story:{\n        width:'400px',\n        height:'710px',\n        objectFit:'contain',\n        backgroundColor:'black'\n    },\n    filter:{\n        width:'150px',\n        maxWidth:'100%'\n    }\n}\n\nconst filtersClass = [\n    ['Original',\"\"],\n    ['1977',\"_1977\"],\n    ['Aden' , 'aden'],\n    ['Brannan' , \"brannan\"],\n    ['Brooklyn' , \"brooklyn\"],\n    ['Clarendon' , \"clarendon\"],\n    ['Earlybird' , \"earlybird\"],\n    ['Gingham' , \"gingham\"],\n    ['Hudson' , \"hudson\"],\n    ['Inkwell' , \"inkwell\"],\n    ['Kelvin' , \"kelvin\"],\n    ['Lark' , \"lark\"],\n    ['Lo-Fi' , \"lofi\"],\n    ['Maven' , \"maven\"],\n    ['Mayfair' , \"mayfair\"],\n    ['Moon' , \"moon\"],\n    ['Nashville' , \"nashville\"],\n    ['Perpetua' , \"perpetua\"],\n    ['Reyes' , \"reyes\"],\n    ['Rise', \"rise\"],\n    ['Slumber', \"slumber\"],\n    ['Stinson', \"stinson\"],\n    ['Toaster', \"toaster\"],\n    ['Valencia', \"valencia\"],\n    ['Walden', \"walden\"],\n    ['Willow', \"willow\"],\n    ['X-pro II', \"xpro2\"]\n]\n\nexport default withRouter(CreatePost);","export const updateUser = (user) => {\n    return {\n        type : 'UPDATE_USER',\n        user\n    }\n}\n\nexport const updateFeed = (feed) => {\n    return {\n        type : 'UPDATE_FEED',\n        feed\n    }\n}\n\nexport const updatePost = (posts) => {\n    return {\n        type : 'UPDATE_POST',\n        posts\n    }\n}\n\nexport const updateBookmark = (bookmarks) => {\n    return {\n        type : 'UPDATE_BOOKMARK',\n        bookmarks\n    }\n}\n\nexport const updateStory = (stories) => {\n    return {\n        type : 'UPDATE_STORY',\n        stories\n    }\n}\n\nexport const updateUpvote = (upvotes) => {\n    return {\n        type : 'UPDATE_UPVOTE',\n        upvotes\n    }\n}\n\nexport const updateDownvote = (downvotes) => {\n    return {\n        type : 'UPDATE_DOWNVOTE',\n        downvotes\n    }\n}\n\nexport const showLoginModal = () => {\n    return {\n        type : 'SHOW_LOGIN'\n    }\n}\n\nexport const unshowLoginModal = () => {\n    return {\n        type : 'UNSHOW_LOGIN'\n    }\n}\n","import React from 'react';\nimport Tippy from '@tippyjs/react';\nimport 'tippy.js/dist/tippy.css'\nimport './Storycard.css'\nimport Modal from 'react-modal';\n\nclass Storycard extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            isModalOpened:false,\n            index:0,\n            interval:null\n        }\n    }\n\n    convertMS = ( milliseconds ) => {\n        var  hour, minute, seconds;\n        seconds = Math.floor(milliseconds / 1000);\n        minute = Math.floor(seconds / 60);\n        seconds = seconds % 60;\n        hour = Math.floor(minute / 60);\n        minute = minute % 60;\n        hour = hour % 24;\n        let answer = '';\n        if(hour!==0){\n            if(hour===1){\n                answer=`${hour}h`;\n            }\n            else{\n                answer=`${hour}h`;\n            }\n        }\n        else if(minute!==0){\n            if(minute===1){\n                answer=`${minute}m`\n            }\n            else{\n                answer=`${minute}m`\n            }\n        }\n        else if(seconds!==0){\n            if(seconds===1){\n                answer=`${seconds}s`\n            }\n            else{\n                answer=`${seconds}s`\n            }\n        }\n        return answer;\n    }\n\n    handleStoryClick = () => {\n        this.setState({isModalOpened:true});\n        this.setState({interval:setInterval(() => {\n            const {stories} = this.props;\n            let index = this.state.index;\n            this.setState({index:index+1});\n            index = this.state.index;\n            if(index>=stories.length){\n                this.setState({isModalOpened:false,index:0})\n                clearInterval(this.state.interval);\n            }\n        }, 10000)})\n    }\n\n    handleModalClose = () => {\n        clearInterval(this.state.interval);\n        this.setState({isModalOpened:false,index:0});\n    }\n\n    render(){\n        const {isModalOpened,index} = this.state;\n        const {stories} = this.props;\n        let x = new Date();\n        let time  = x - stories[index]['time']\n        let t = this.convertMS(time);\n        return(\n            <>\n                <div className='story-card'>\n                    <img alt='profile' onClick={this.handleStoryClick} style={styles.image} src={stories[0]['profileImg']} />\n                    <Tippy delay={[700,null]} placement='bottom-start' arrow={false} content={<div style={styles.tippy}>{stories[0]['username']}</div>}><div className='story-card-username'>{stories[0]['username']}</div></Tippy>\n                </div>\n                {   index<stories.length && \n                    <Modal isOpen={isModalOpened} onRequestClose={()=>this.handleModalClose()} className='story-modal'>\n                        <div className='story-modal-outer'>\n                            <div className='story-modal-inner'>\n                                <div className='story-modal-inner-top'>\n                                    <img alt='profile' style={styles.icon} src={stories[index]['profileImg']} />\n                                    <div style={styles.username}>{stories[index]['username']}</div>\n                                    <div style={{marginLeft:10,color:'grey',fontWeight:400}}>{t}</div>\n                                </div>\n                                {   stories[index]['isVideo'] === false &&\n                                    <img alt='story'  onClick={()=>{\n                                        this.setState({index:index+1})\n                                        clearInterval(this.state.interval);\n                                        this.handleStoryClick();\n                                        }}\n                                    className='story-modal-inner-bottom' style={styles.story} src={stories[index]['image']} />\n                                }\n                                {   stories[index]['isVideo'] === true &&\n                                    <video width={400} className='story-modal-inner-bottom' style={styles.story} controls>\n                                        <source src={stories[index]['image']} type=\"video/mp4\" />\n                                    </video>\n                                }\n                            </div>\n                        </div>\n                    </Modal>\n                }\n            </>\n        )\n    }\n}\n\nconst styles = {\n    image:{\n        height:56,\n        width:56,\n        borderRadius:50,\n        padding:1.2,\n        border:'2px solid black',\n        marginRight:20\n    },\n    tippy:{\n        fontSize:10\n    },story:{\n        width:'400px',\n        height:'710px',\n        objectFit:'contain',\n        backgroundColor:'black',\n        maxWidth:'100%'\n    },\n    icon:{\n        height:32,\n        width:32,\n        borderRadius:50,\n        marginRight:15\n    },\n    username:{\n        color:'white',\n        fontWeight:700\n    }\n}\n\nexport default Storycard;\n\n","import React from 'react';\nimport { updateStory } from '../../actions';\nimport {db} from '../../firebase';\nimport Storycard from '../Storycard/Storycard';\nimport './Story.css';\n\nclass Story extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            stories:{},\n            loading:true\n        }\n    }\n\n    componentDidMount(){\n        const {userId,store} = this.props;\n        let stories = {};\n        db.collection('users').doc(userId).get().then((doc)=>{\n            const data = doc.data();\n            let following = data['following'];\n            if(data['stories'].length>0){\n                let temp = data['stories']//stories[userId] = data['stories']\n                temp.sort((a,b)=>b.time - a.time)\n                let x = new Date();\n                x = x.getTime();\n                temp = temp.filter((t)=>(x - t.time) < 3600000)\n                if(temp.length>0){\n                    stories[userId]   = temp\n                }\n            }\n            following = Object.keys(following);\n            following.push(userId);\n            let count = 0;\n            let length = Object.keys(following).length;\n            following.forEach((uId)=>{\n                count+=1;\n                db.collection('users').doc(uId).get().then((doc2)=>{\n                    const data2= doc2.data();\n                    if(data2['stories'].length>0){\n                        let temp = data2['stories']\n                        temp.sort((a,b)=>b.time - a.time)\n                        let x = new Date();\n                        x = x.getTime();\n                        temp = temp.filter((t)=>(x - t.time) < 3600000*24)\n                        \n                        if(temp.length>0){\n                            stories[uId]   = temp\n                        }\n                    }\n                    if(count===length){\n                        store.dispatch(updateStory(stories));\n                        this.setState({stories,loading:false});\n                    }\n                })\n            })\n        })\n    }\n\n    render(){\n        const {stories,loading} = this.state;\n        return (\n            <div className='story-outer'> \n                {\n                <div className='story'>\n                    {\n                        !loading && Object.keys(stories).map((uId) => <Storycard key={uId} userId={uId} stories={stories[uId]}/>)\n                    }\n                </div>\n                }\n            </div>\n        )\n    }\n}\n\nexport default Story;","import React from 'react';\nimport { db } from '../../firebase';\nimport Modal from 'react-modal';\nimport {Link} from 'react-router-dom';\nimport {updateUpvote,updateDownvote,updateBookmark, updatePost} from '../../actions'\n\nimport './Postcard.css'\n\nclass Postcard extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            isUpvoted : false,\n            isDownvoted : false,\n            isBookmarked : false,\n            noOfUpvotes:0,\n            editSelected : false,\n            time:'',\n            commentEnter:false,\n            isComment:false,\n            comments:[],\n            isModalOpen:false,\n            isCommentModal:false\n        };\n        this.captionRef = React.createRef();\n        this.commentRef = React.createRef();\n    }\n\n    convertMS = ( milliseconds ) => {\n        var day, hour, minute, seconds;\n        seconds = Math.floor(milliseconds / 1000);\n        minute = Math.floor(seconds / 60);\n        seconds = seconds % 60;\n        hour = Math.floor(minute / 60);\n        minute = minute % 60;\n        day = Math.floor(hour / 24);\n        hour = hour % 24;\n        let week=0,month=0,year=0;\n        let answer = '';\n        if(day>0){\n            week = Math.floor(day/7);\n            month = Math.floor(day/30);\n            year = Math.floor(day/365);\n        }\n        if(year!==0){\n            if(year===1){\n                answer=`${year} year ago`\n            }\n            else{\n                answer=`${year} years ago`\n            }\n        }\n        else if(month!==0){\n            if(month===1){\n                answer=`${month} month ago`\n            }\n            else{\n                answer=`${month} months ago`\n            }\n        }\n        else if(week!==0){\n            if(week===1){\n                answer=`${week} week ago`\n            }\n            else{\n                answer=`${week} weeks ago`\n            }\n        }\n        else if(day!==0){\n            if(day===1){\n                answer=`${day} day ago`\n            }\n            else{\n                answer=`${day} days ago`\n            }\n        }\n        else if(hour!==0){\n            if(hour===1){\n                answer=`${hour} hour ago`;\n            }\n            else{\n                answer=`${hour} hours ago`;\n            }\n        }\n        else if(minute!==0){\n            if(minute===1){\n                answer=`${minute} minute ago`\n            }\n            else{\n                answer=`${minute} minutes ago`\n            }\n        }\n        else if(seconds!==0){\n            if(seconds===1){\n                answer=`${seconds} second ago`\n            }\n            else{\n                answer=`${seconds} seconds ago`\n            }\n        }\n        return answer;\n    }\n\n    componentDidMount(){\n        const {store,post,commentModal} = this.props;\n        if(commentModal){\n            this.setState({isCommentModal:true});\n        }\n        this.setState({noOfUpvotes:post.noOfUpvotes});\n        const {upvoteState,downvoteState,bookmarkState} = store.getState();\n        const key = post.key;\n        let comments = {};\n        if(post.comment!==undefined){\n            comments = post.comment;\n        }\n        \n        let commentsArr = [];\n        let l = Object.keys(comments).length;\n        let count = 0\n        for(var keys in comments){\n            commentsArr.push(comments[keys])\n            commentsArr.sort((a,b)=>b[3]-a[3]);\n            this.setState({comments:commentsArr});\n            if(Object.keys(comments).length>0){\n                this.setState({isComment:true})\n            }  \n        }\n        \n        let oldTime = post.time;\n        let currentTime = new Date();\n        currentTime = currentTime.getTime();\n        let time = currentTime - oldTime;\n        this.setState({time:this.convertMS(time)})\n        let index = -1;\n        upvoteState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isUpvoted:false});\n        }\n        else{\n            this.setState({isUpvoted:true});\n        }\n        index = -1;\n        downvoteState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isDownvoted:false});\n        }\n        else{\n            this.setState({isDownvoted:true});\n        }\n        index = -1;\n        bookmarkState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isBookmarked:false});\n        }\n        else{\n            this.setState({isBookmarked:true});\n        }\n    }\n\n    handleUpvote = () => {\n        let {store,post,userId} = this.props;\n        const key = post.key;\n        let {upvoteState,downvoteState} = store.getState();\n        let index = -1;\n        let {noOfUpvotes} = this.state;\n        upvoteState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isUpvoted:true,isDownvoted:false});\n            upvoteState.push(post);\n            noOfUpvotes+=1;\n            this.setState({noOfUpvotes});\n            store.dispatch(updateUpvote(upvoteState));\n            let inde = -1;\n            downvoteState.forEach((p,i)=>{\n                if(p.key===key){\n                    inde=i;\n                }\n            })\n            if(inde!==-1){\n                downvoteState = downvoteState.filter((u,i)=>i!==inde);\n                store.dispatch(updateDownvote(downvoteState));\n                noOfUpvotes+=1;\n                this.setState({noOfUpvotes});\n            }\n        }\n        else{\n            noOfUpvotes-=1\n            this.setState({isUpvoted:false,noOfUpvotes});\n            upvoteState = upvoteState.filter((u,i)=>i!==index);\n            store.dispatch(updateUpvote(upvoteState));\n            if(this.props.upvotePost){\n                this.props.upvotePost(userId,key);\n            }\n        }\n        upvoteState = store.getState().upvoteState;\n        downvoteState = store.getState().downvoteState;\n        post.noOfUpvotes = noOfUpvotes;\n        db.collection('users').doc(userId).update({\n            upvotes: upvoteState,\n            downvotes: downvoteState,\n        })\n        db.collection('users').doc(post.userId).get().then((doc)=>{\n            const data = doc.data()\n            let posts = data.posts;\n            posts = posts.filter((p,i)=>p.key!==post.key);\n            posts.push(post);\n            db.collection('users').doc(post.userId).update({\n                posts\n            })\n        })\n        // if(posts){\n        //     posts = posts.filter((p,i)=>p.userId===post.userId && p.key!==post.key);\n        //     posts.push(post);\n        //     \n        //     db.collection('users').doc(post.userId).update({\n        //         posts\n        //     })\n        // }\n\n    }\n\n    handleDownvote = () => {\n        let {store,post,userId} = this.props;\n        const key = post.key;\n        let {upvoteState,downvoteState} = store.getState();\n        let index = -1;\n        let {noOfUpvotes} = this.state;\n        downvoteState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isUpvoted:false,isDownvoted:true});\n            downvoteState.push(post);\n            noOfUpvotes-=1;\n            store.dispatch(updateDownvote(downvoteState));\n            let inde = -1;\n            upvoteState.forEach((p,i)=>{\n                if(p.key===key){\n                    inde=i;\n                }\n            })\n            if(inde!==-1){\n                noOfUpvotes-=1;\n                upvoteState = upvoteState.filter((u,i)=>i!==inde);\n                store.dispatch(updateUpvote(upvoteState));\n            }\n            this.setState({noOfUpvotes});\n            if (this.props.upvotePost){\n                this.props.upvotePost(userId,key);\n            }\n        }\n        else{\n            noOfUpvotes+=1;\n            this.setState({isDownvoted:false,noOfUpvotes});\n            downvoteState = downvoteState.filter((u,i)=>i!==index);\n            store.dispatch(updateDownvote(downvoteState));\n        }\n        upvoteState = store.getState().upvoteState;\n        downvoteState = store.getState().downvoteState;\n        post.noOfUpvotes = noOfUpvotes;\n        db.collection('users').doc(userId).update({\n            upvotes: upvoteState,\n            downvotes: downvoteState\n        })\n        db.collection('users').doc(post.userId).get().then((doc)=>{\n            const data = doc.data()\n            let posts = data.posts;\n            posts = posts.filter((p,i)=>p.key!==post.key);\n            posts.push(post);\n            db.collection('users').doc(post.userId).update({\n                posts\n            })\n        })\n        // if(posts){\n        //     posts = posts.filter((p,i)=>p.userId===post.userId && p.key!==post.key);\n        //     posts.push(post);\n        //     db.collection('users').doc(post.userId).update({\n        //         posts\n        //     })\n        // }\n    }\n\n    handleBookmark = () => {\n        const {store,post,userId} = this.props;\n        const key = post.key;\n        let {bookmarkState} = store.getState();\n        let index = -1;\n        bookmarkState.forEach((p,i)=>{\n            if(p.key===key){\n                index=i;\n            }\n        })\n        if(index===-1){\n            this.setState({isBookmarked:true});\n            bookmarkState.push(post);\n            store.dispatch(updateBookmark(bookmarkState));\n        }\n        else{\n            this.setState({isBookmarked:false});\n            bookmarkState = bookmarkState.filter((u,i)=>i!==index);\n            store.dispatch(updateBookmark(bookmarkState));\n            if(this.props.bookmarkPost){\n                this.props.bookmarkPost(userId,key);\n            }\n        }\n        db.collection('users').doc(userId).update({\n            bookmarks:bookmarkState\n        })\n    }\n\n    handleDelete = () => {\n        const {post} = this.props;\n        this.props.deletePost(post.userId,post.key);\n    }\n\n    handleEditClick = () => {\n        this.setState({editSelected:true});\n    }\n\n    handleEdit = () => {\n        const {post} = this.props;\n        let caption = '';\n        if(this.captionRef.current !== null){\n            caption = this.captionRef.current.value;\n        }\n        this.setState({editSelected:false});\n        this.props.modifyPost(post.userId,post.key,caption,post);\n    }\n\n    handleComment = () => {\n        let comment = '';\n        if(this.commentRef.current!==null){\n            comment = this.commentRef.current.value;\n        }\n        if(comment===''){\n            this.setState({commentEnter:false})\n        }\n        else{\n            this.setState({commentEnter:true})\n        }\n    }\n\n    handleCommentEnter  = () => {\n        let time = new Date();\n        time  = time.getTime();\n        let {post,store} = this.props;\n        let onlineUserId = this.props.userId;\n        let onlineUsername = this.props.username;\n        let onlineProfileImg = this.props.profileImg;\n        let userId = post.userId;\n       // let username = post.username;\n        let k = `${userId}${time}`;\n        let comment = ''\n        if(this.commentRef.current!==null){\n            comment = this.commentRef.current.value;\n        }\n        this.commentRef.current.value = '';\n        const key = post.key;\n        if(post.comment===undefined){\n            post.comment = {};\n        }\n        post.comment[k]=[]\n        post.comment[k].push(onlineUserId);\n        post.comment[k].push(onlineUsername);\n        post.comment[k].push(comment);\n        post.comment[k].push(time);\n        post.comment[k].push(onlineUserId+time);\n        post.comment[k].push(onlineProfileImg);\n        // post.comment[k]=[onlineUserId,onlineUsername,comment,time,onlineUserId+time,onlineProfileImg];\n        let {postState} = store.getState();\n        postState = postState.filter((p,i)=>p.key!==key);\n        postState.push(post);\n        store.subscribe(()=>this.forceUpdate());\n        let posts = [];\n        \n        db.collection('users').doc(userId).get().then((doc)=>{\n            let data = doc.data();\n            posts = data.posts.filter((p,i)=>p.key!==key);\n            posts.push(post);\n            db.collection('users').doc(userId).update({\n                posts : posts\n            }).then(()=>{\n               store.dispatch(updatePost(postState));\n               this.componentDidMount();\n            }).catch((e)=>{\n            })\n        })\n    }\n\n    handleCommentClick = () => {\n        this.setState({isModalOpen:true});\n    }\n\n    render(){\n        const {profileImg,username,image,userId,caption,noOfUpvotes,isVideo,filter} = this.props.post;\n        //const onlineUsername = this.props.username;\n        const onlineUserId = this.props.userId;\n        const {isUpvoted,isDownvoted,isBookmarked,editSelected,time,commentEnter,comments,isComment,isModalOpen,isCommentModal} = this.state;\n        return(\n            <>\n                <div className='post-card-outer'>\n                    <div className='post-card'>\n                        <div className='post-card-top'>\n                            <div className='post-card-top-first'>\n                                <Link to={`/profile-${username}`}><img alt='profile' style={styles.profile}\n                                    src ={profileImg} /></Link>\n                                <Link to={`/profile-${username}`} style={{textDecoration:'none',color:'black'}}><h5>{username}</h5></Link>\n                            </div>\n                            {userId === onlineUserId && <div className='post-card-top-second'>\n                                { editSelected && <textarea  ref={this.captionRef} placeholder='Write a caption...' maxLength='100' ></textarea>}\n                                { editSelected ? \n                                    <img alt='edit' onClick={this.handleEdit} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fenter.svg?alt=media&token=7b8b3714-7a13-460a-92bd-03548bfd4c7e' />\n                                    :   <img alt='edit-2' onClick={this.handleEditClick} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fedit.svg?alt=media&token=fedef40a-ff25-4d09-bfcb-8db4391ca2b0' />\n                                }\n                                <img alt='delete' onClick={this.handleDelete} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fdelete.svg?alt=media&token=8b3a5890-8de1-4a63-b76c-daef0a96f759' />\n                            </div>}\n                        </div>\n                        <div className='post-card-post'>\n                            {!isVideo ? \n                                <figure className={filter} style={{width:'654px'}}><img alt='post' style={styles.post} src={image} /> </figure>\n                                :\n                                <video width={styles.post.width} style={styles.post} controls>\n                                        <source src={image} type=\"video/mp4\" />\n                                </video>\n                            }\n\n                        </div>\n                        <div className='post-card-actions'>\n                            <div className='post-card-actions-upvotes'>\n                                {   isUpvoted ?\n                                    <img alt='upvote' onClick={()=>this.handleUpvote()} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fupvote-fill.svg?alt=media&token=945a6d75-951e-4430-bc8e-e925dbb7c65c' />\n                                    :   <img alt='upvote-1' onClick={()=>this.handleUpvote()} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fupvote.svg?alt=media&token=ecf11599-0904-4713-bf85-0ed045f4f430' />\n                                }\n                                {   isDownvoted ?\n                                    <img alt='downvote' onClick={()=>this.handleDownvote()} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fdownvote-fill.svg?alt=media&token=bc0c21d7-0380-4fb3-a615-0a5fdaa20e77' />\n                                    :   <img alt='downvote-1' onClick={()=>this.handleDownvote()} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fdownvote.svg?alt=media&token=6f224cc0-8f1d-4b89-b933-0f7702bc66fd' />\n                                }   \n                            </div>\n                            {/* { isBookmarked ? \n                                <img  alt='bookmark' onClick={this.handleBookmark} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fbookmark-fill.svg?alt=media&token=ccd08a90-7c2e-4110-a1bf-f457404e735a' /> \n                                : <img  alt='bookmark-1' onClick={this.handleBookmark} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fbookmark.svg?alt=media&token=62faef86-4543-4d35-a7eb-4db68656a4d0' />} */}\n                        </div>\n                        <div style={{marginTop:10}} className='post-card-upvotes'>\n                            <div style={{fontWeight:500,fontSize:13,marginLeft:15}}>{Math.abs(noOfUpvotes)}{noOfUpvotes>=0 ? ' Upvotes' : ' Downvotes'}</div>\n                        </div>\n                        <div className='post-card-bottom'>\n                            <Link to={`/profile-${username}`} style={{textDecoration:'none',color:'black'}}><div style={{marginRight:10,fontWeight:600,fontSize:13}}>{username}</div></Link>\n                            <div style={{fontSize:13}}>{caption}</div>\n                        </div>\n                        {!isCommentModal && <div className='post-card-all-comments'>\n                            {isComment && <div onClick={this.handleCommentClick} className='post-card-all-comments-first'>View all {comments.length} Comments</div>}\n                            {isComment && \n                                <div className='post-card-all-comments-second'>\n                                    <Link to={`/profile-${comments[0][1]}`} style={{textDecoration:'none',color:'black'}}><div className='post-card-all-comments-second-username'>{comments[0][1]}</div></Link>\n                                    <div className='post-card-all-comments-second-comment'>{comments[0][2]}</div>\n                                </div>\n                            }\n                        </div>}\n                        <div className='post-card-time'>\n                            <div>{time}</div>\n                        </div>\n                        {!isCommentModal && <div className='post-card-comments'>\n                            <textarea ref={this.commentRef} onChange={()=>this.handleComment()} placeholder='Add a comment...'></textarea>\n                            {commentEnter && <img alt='comment' style={styles.icon} onClick={this.handleCommentEnter} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fenter.svg?alt=media&token=7b8b3714-7a13-460a-92bd-03548bfd4c7e' />}\n                        </div>}\n                    </div>\n                </div>\n                {!isCommentModal && <Modal isOpen={isModalOpen} onRequestClose={()=>this.setState({isModalOpen:false})} className='comments-modal'>\n                    <Postcard  className='comments-modal-left' modifyPost={this.modifyPost} userId={this.props.userId} upvotePost={this.upvotePost} deletePost={this.deletePost}  post={this.props.post} store={this.props.store} commentModal={true}/>\n                    <div className='comments-modal-right'>{comments.map((c,i)=>{\n                        let d = new Date();\n                        let t = d.getTime();\n                        t = t- c[3];\n                        return (\n                            <div key={c[4]} className='comments-modal-inner'>\n                                <Link to={`/profile-${c[1]}`} style={{textDecoration:'none',color:'black'}}><img alt='post-1'  style={styles.profile} src={c[5]} /></Link>\n                                <div className='comments-modal-inner-right'>\n                                    <div className='comments-modal-inner-top'>\n                                        <Link to={`/profile-${c[1]}`} style={{textDecoration:'none',color:'black'}}><div className='comments-modal-username'>{c[1]}</div></Link>\n                                        <div  className='comments-modal-comment'>{c[2]}</div>\n                                    </div>\n                                    <div  className='comments-modal-time'>{this.convertMS(t)}</div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                    </div>\n                </Modal>}\n            </>\n        )\n    }\n}\n\nconst styles = {\n    profile:{\n        height:32,\n        width:32,\n        borderRadius:50,\n        marginRight:15,\n        marginLeft:15\n    },\n    post:{\n        width:'654px',\n        height:'auto',\n        maxWidth:'100%'\n    },\n    icon:{\n        width:25,\n        height:25,\n        marginRight:25\n    }\n}\n\nexport default Postcard;\n\n","import React from 'react';\nimport {withRouter} from 'react-router';\nimport {Link} from 'react-router-dom';\nimport {auth, db,storage} from '../../firebase';\nimport {updateUser,updatePost} from '../../actions.js';\nimport Postcard from '../Postcard/Postcard';\nimport './Profile.css';\nimport Modal from 'react-modal';\n\nModal.setAppElement('#root');\n\nclass Profile extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            noOfPosts:0,\n            loading:true,\n            isOpened:false,\n            post:{},\n            user:{},\n            userId:'',\n            isFollowing:false,\n            noOfFollowers:0,\n            noOfFollowing:0,\n            followers:{},\n            following:{},\n            followersModal:false,\n            followingModal:false,\n            postFullname:'',\n            postProfileImg:'',\n            onlineFullname:'',\n            settingsModal:false,\n            img:''\n        }\n        this.usernameRef = React.createRef();\n        this.nameRef = React.createRef();\n        this.bioRef = React.createRef();\n        this.passwordRef = React.createRef();\n    }\n    componentDidMount(){\n        const {store,userId} = this.props;\n        const username = this.props.match.url.split('-')[1];\n        if(username!==undefined){\n            db.collection('users').where('username','==',username).get().then((snapshot)=>{\n                let userId = '';\n                snapshot.forEach((doc)=>{\n                    //const data = doc.data();\n                    userId = doc.id;\n                })\n                db.collection('users').doc(this.props.userId).get().then((doc)=>{\n                    const data = doc.data();\n                    const following = data.following;\n                    Object.keys(following).forEach((fol)=>{\n                        if(fol===userId){\n                            this.setState({isFollowing:true,onlineFullname:data.fullName})\n                        }\n                    })\n                })\n                store.subscribe(()=>this.forceUpdate());\n                db.collection('users').doc(userId).get().then((doc)=>{\n                    const data = doc.data();\n                    let user = data;\n                    const {followers,following} =   data;\n                    let newFollowers={},newFollowing={};\n                    let c1 = 0,c2 = 0;\n                    const noOfFollowing = Object.keys(following).length;\n                    const noOfFollowers = Object.keys(followers).length;\n                    if(noOfFollowing===0 && noOfFollowers===0){\n                        user.posts.sort((a,b)=>b.time-a.time)\n                        store.dispatch(updateUser(user));\n                        this.setState({postFullname:data.fullName,postProfileImg:data.profileImg,user,noOfPosts:user.posts.length,loading:false,userId,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                    }\n                    Object.keys(followers).forEach((f)=>{\n                        db.collection('users').doc(f).get().then((doc)=>{\n                            \n                            const data = doc.data();\n                            newFollowers[f] = [data.username,data.fullName,data.profileImg]\n                            c1+=1;\n                        }).then(()=>{\n                            if(c1===noOfFollowers && c2===noOfFollowing){\n                                user.posts.sort((a,b)=>b.time-a.time)\n                                store.dispatch(updateUser(user));\n                                this.setState({postFullname:data.fullName,postProfileImg:data.profileImg,user,noOfPosts:user.posts.length,loading:false,userId,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                            }\n                        })\n                    })\n                    Object.keys(following).forEach((f)=>{\n                        db.collection('users').doc(f).get().then((doc)=>{\n                            const data = doc.data();\n                            newFollowing[f] = [data.username,data.fullName,data.profileImg];\n                            c2 +=1 ;\n                        }).then(()=>{\n                            if(c1===noOfFollowers && c2===noOfFollowing){\n                                user.posts.sort((a,b)=>b.time-a.time)\n                                store.dispatch(updateUser(user));\n                                this.setState({postFullname:data.fullName,postProfileImg:data.profileImg,user,noOfPosts:user.posts.length,loading:false,userId,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                            }\n                        })\n                    })\n                    \n                })\n            })\n        }\n        else{\n            store.subscribe(()=>this.forceUpdate());\n            db.collection('users').doc(userId).get().then((doc)=>{\n                const data = doc.data();\n                let user = data;\n                const {followers,following} =data;\n                let newFollowers={},newFollowing={};\n                let c1 = 0,c2 = 0;\n                const noOfFollowing = Object.keys(following).length;\n                const noOfFollowers = Object.keys(followers).length;\n                if(noOfFollowing===0 && noOfFollowers===0){\n                    user.posts.sort((a,b)=>b.time-a.time)\n                    store.dispatch(updateUser(user));\n                    this.setState({postFullname:data.fullName,postProfileImg:data.profileImg,user,noOfPosts:user.posts.length,loading:false,userId,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                }\n                Object.keys(followers).forEach((f)=>{\n                    db.collection('users').doc(f).get().then((doc)=>{\n                        \n                        const data = doc.data();\n                        newFollowers[f] = [data.username,data.fullName,data.profileImg]\n                        c1+=1;\n                    }).then(()=>{\n                        if(c1===noOfFollowers && c2===noOfFollowing){\n                            user.posts.sort((a,b)=>b.time-a.time)\n                            store.dispatch(updateUser(user));\n                            this.setState({user,noOfPosts:user.posts.length,loading:false,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                        }\n                    })\n                })\n                Object.keys(following).forEach((f)=>{\n                    db.collection('users').doc(f).get().then((doc)=>{\n                        const data = doc.data();\n                        newFollowing[f] = [data.username,data.fullName,data.profileImg];\n                        c2 +=1 ;\n                    }).then(()=>{\n                        if(c1===noOfFollowers && c2===noOfFollowing){\n                            user.posts.sort((a,b)=>b.time-a.time)\n                            store.dispatch(updateUser(user));\n                            this.setState({user,noOfPosts:user.posts.length,loading:false,noOfFollowers,noOfFollowing,followers:newFollowers,following:newFollowing})\n                        }\n                    })\n                })\n                \n            })\n        }\n        \n    }\n\n    deletePost = (userId,key) => {\n        const {store} = this.props;\n        store.subscribe(()=>this.forceUpdate());\n        let posts = store.getState().postState;\n        const allPosts = posts.filter((p,i) => p.key!==key);\n        const deletedUserPosts = posts.filter((p,i) => p.userId===userId && p.key!==key);\n        db.collection('users').doc(userId).update({\n            posts:deletedUserPosts\n        });\n        store.dispatch(updatePost(allPosts));\n    }\n\n    modifyPost = (userId,key,caption,post) => {\n        const {store} = this.props;\n        store.subscribe(()=>this.forceUpdate());\n        post.caption = caption;\n        let posts = store.getState().postState;\n        const allPosts = posts.filter((p,i) => p.key!==key);\n        posts = posts.filter((p,i) => p.userId===userId && p.key!==key);\n        posts.push(post);\n        allPosts.push(post);\n        db.collection('users').doc(userId).update({\n            posts\n        });\n        store.dispatch(updatePost(allPosts));\n    }\n\n    handleModalClick = (post) => {\n        this.setState({post,isOpened:true});\n    }\n\n    handleFollowing = () => {\n        const {isFollowing} = this.state;\n        let onlineUserId = this.props.userId;\n        let postUserId = this.state.userId\n        const {noOfFollowers} = this.state;\n        if(isFollowing===true){\n            db.collection('users').doc(onlineUserId).get().then((doc)=>{\n                let following = doc.data().following;\n                delete following[postUserId];\n                db.collection('users').doc(onlineUserId).update({\n                    following\n                })\n                following = this.state.following;\n                delete following[postUserId];\n                this.setState({following})\n            })\n            db.collection('users').doc(postUserId).get().then((doc)=>{\n                let followers = doc.data().following;\n                delete followers[onlineUserId];\n                db.collection('users').doc(postUserId).update({\n                    followers\n                })\n                followers = this.state.followers;\n                delete followers[postUserId];\n                this.setState({followers})\n            })\n            this.setState({isFollowing:false,noOfFollowers:noOfFollowers-1})\n        }\n        else{\n            db.collection('users').doc(onlineUserId).get().then((doc)=>{\n               // const data = doc.data();\n                let following = doc.data().following;\n                following[postUserId] = true;\n                db.collection('users').doc(onlineUserId).update({\n                    following\n                })\n                \n            })\n            db.collection('users').doc(postUserId).get().then((doc)=>{\n             //   const data = doc.data();\n                let followers = doc.data().followers;\n                followers[onlineUserId] = true;\n                db.collection('users').doc(postUserId).update({\n                    followers\n                })\n            })\n            this.setState({isFollowing:true,noOfFollowers:noOfFollowers+1})\n        }\n    }\n\n    handleUsername = () => {\n        let username = this.usernameRef.current.value;\n        username = username.toLowerCase();\n        if(username.length>5){\n            db.collection('users').where('username','==',username).get().then((snapshot)=>{\n                if(snapshot.empty === true){\n                    this.usernameRef.current.value='';\n                    const user = this.state.user;\n                    user.username = username;\n                    auth.currentUser.updateProfile({\n                        displayName:username\n                    })\n                    db.collection('users').doc(this.props.userId).update({\n                        username\n                    })\n                    this.setState({user});\n                }\n                else{\n                    alert('Username not available')\n                }\n            })\n        }\n        else{\n            alert('Username must consist of 6 or more characters');\n        }\n    }\n\n    handleName = () =>{\n        let name = this.nameRef.current.value;\n        if(name.length>0){\n            this.nameRef.current.value='';\n            const user = this.state.user;\n            user.fullName = name;\n            db.collection('users').doc(this.props.userId).update({\n                fullName:name\n            })\n            this.setState({user});\n        }\n    }\n\n    handlePassword = () =>{\n        let password = this.passwordRef.current.value;\n        if(password.length>5){\n            this.passwordRef.current.value='';\n            auth.currentUser.updatePassword(password).then(function() {\n              }).catch(function(error) {\n              });\n        }\n        else{\n            alert('Password must consist of 6 or more characters');\n        }\n    }\n\n    handleBio = () =>{\n        let s = this;\n        let bio = s.bioRef.current.value;\n        if(bio.length>0){\n            s.bioRef.current.value='';\n            const user = s.state.user;\n            user.bio = bio;\n            db.collection('users').doc(s.props.userId).update({\n                bio\n            })\n            s.setState({user,settingsModal:false});\n        }\n    }\n\n    onChange = (e,s) => {\n        if(e.target.files.length>0){\n            let reader = new FileReader();\n            const file = e.target.files[0];\n            reader.onload = function (f) {\n                let img = f.target.result;\n                if(f.target.result.substring(5,10)==='image'){\n                    s.setState({img});\n                    const storageRef = storage.ref();\n                    const {username} = s.props;\n                    const d = new Date();\n                    const time = d.getTime();\n                    const fileRef = storageRef.child(`${username}${time}.`+file.name.split('.')[1]);\n                    fileRef.put(file).then((x)=>{\n                        const bucket = x.ref._delegate.bucket;\n                        const fileName = x.ref._delegate.fullPath;\n                        const url = `https://firebasestorage.googleapis.com/v0/b/${bucket}/o/${fileName}?alt=media`;\n                        const user = s.state.user;\n                        auth.currentUser.updateProfile({\n                            photoURL:url\n                        })\n                        user.profileImg = url;\n                        db.collection('users').doc(s.props.userId).update({\n                            profileImg:url\n                        })\n                        s.setState(user);\n                    })\n                }\n            }\n            reader.readAsDataURL(e.target.files[0]);}\n    }\n\n    render(){\n        const {store} = this.props;\n        const {img,loading,noOfPosts,post,isOpened,user,isFollowing,noOfFollowers,noOfFollowing,followersModal,followingModal,followers,following,settingsModal} = this.state;\n        let onlineUserId = this.props.userId;\n        let postUserId = this.state.userId\n        let userId = ''\n        if(this.state.userId===''){\n            userId = this.props.userId;\n        }else{\n            userId = this.state.userId;\n        }\n        \n        return (\n            <>\n                {(!loading)&& \n                    <div className='profile'>\n                        <div className='profile-inner'>\n                            <div className='profile-top'>\n                                <div className='profile-left'>\n                                    <img alt='profile' style={styles.image} src={user.profileImg} />\n                                </div>\n                                <div className='profile-right'>\n                                    <div className='profile-right-first'>\n                                        <div style={styles.username}>{user.username}</div>\n                                        {(postUserId!=='' && postUserId!==onlineUserId) && (isFollowing ? <button style={{backgroundColor:'white',color:'black',border:'1px solid #dbdbdb'}} onClick={this.handleFollowing}>Following</button> : <button onClick={this.handleFollowing}>Follow</button>)}\n                                        {(postUserId==='' || postUserId===onlineUserId) && <img alt='settings' onClick={()=>this.setState({settingsModal:!this.state.settingsModal})} style={styles.icon} src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fsettings.svg?alt=media&token=fedef40a-ff25-4d09-bfcb-8db4391ca2b0' />}\n                                    </div>\n                                    <div className='profile-right-second'>\n                                        <div><span style={{fontWeight:600}}>{noOfPosts}</span> posts</div>\n                                        <div onClick={()=>this.setState({followersModal:true})}><span style={{fontWeight:600}}>{noOfFollowers}</span> followers</div>\n                                        <div onClick={()=>this.setState({followingModal:true})}><span style={{fontWeight:600}}>{noOfFollowing}</span> following</div>\n                                    </div>\n                                    <div className='profile-right-third'>\n                                        <div className='profile-right-third-name'>\n                                            <div style={styles.fullName} >{user.fullName}</div>\n                                        </div>\n                                        <div style={styles.bio} >{user.bio}</div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='profile-bottom'>\n                                {user.posts.map((post,i)=>{\n                                    return <img alt='post' key={post.key} onClick={()=>this.handleModalClick(post)} src={post.image} />\n                                })}\n                                {user.posts.length===0 && <div className='no-data'>\n                                    <div>No Posts to show</div>\n                                    <div><Link to='/add'>Create Post</Link></div>\n                                </div>}\n                            </div>\n                            {   Object.keys(user.posts).length!==0 && \n                                <Modal isOpen={isOpened} onRequestClose={()=>this.setState({isOpened:false})} className='upvotes-post-card'>\n                                    <Postcard  modifyPost={this.modifyPost}  username={this.props.username} profileImg={this.props.profileImg} userId={onlineUserId} postUserId={this.state.userId} upvotePost={this.upvotePost} deletePost={this.deletePost}  post={post} store={store}/>\n                                </Modal>\n                            }\n                        </div>\n                        <Modal isOpen={followersModal} onRequestClose={()=>this.setState({followersModal:false})} className='followers-modal'>\n                            <div className='followers-modal-inner'>\n                                <div className='followers-top'>\n                                    <div></div>\n                                    <div>Followers</div>\n                                    <div onClick={()=>this.setState({followersModal:false})}><img alt='cross' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fcross.svg?alt=media&token=6228795e-4864-471d-8cbc-81162e190077'/></div>\n                                </div>\n                                <div className='followers-list'>\n                                    {Object.keys(followers).map((userId)=>{\n                                        return (\n                                            <Link key={userId} to={`/profile-${followers[userId][0]}`}>\n                                                <div className='followers-result-item'>\n                                                    <div className='followers-result-item-img'>\n                                                        <img alt='profile' style={{height:30,width:30,borderRadius:50}}src={followers[userId][2]} />\n                                                    </div>\n                                                    <div className='followers-result-item-name'>\n                                                        <div className='followers-result-item-username'>{followers[userId][0]}</div>\n                                                        <div className='followers-result-item-fullname'>{followers[userId][1]}</div>\n                                                    </div>\n                                                </div>\n                                            </Link>)\n                                    })}\n                                </div>\n                            </div>\n                        </Modal>\n                        <Modal isOpen={followingModal} onRequestClose={()=>this.setState({followingModal:false})}  className='followers-modal'>\n                                <div className='followers-modal-inner'>\n                                    <div className='followers-top'>\n                                        <div></div>\n                                        <div>Following</div>\n                                        <div onClick={()=>this.setState({followingModal:false})}><img alt='cross' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Fcross.svg?alt=media&token=6228795e-4864-471d-8cbc-81162e190077'/></div>\n                                    </div>\n                                    <div className='followers-list'>\n                                        {Object.keys(following).map((userId)=>{\n                                            return (\n                                                <Link key={userId} to={`/profile-${following[userId][0]}`}>\n                                                    <div className='followers-result-item'>\n                                                        <div className='followers-result-item-img'>\n                                                            <img alt='profile' style={{height:30,width:30,borderRadius:50}}src={following[userId][2]} />\n                                                        </div>\n                                                        <div className='followers-result-item-name'>\n                                                            <div className='followers-result-item-username'>{following[userId][0]}</div>\n                                                            <div className='followers-result-item-fullname'>{following[userId][1]}</div>\n                                                        </div>\n                                                    </div>\n                                                </Link>)\n                                        })}\n                                    </div>\n                                </div>\n                        </Modal>\n                    </div>\n                }\n                <Modal isOpen={loading}  className='loading-modal' >\n                    <img alt='loading' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Floading.svg?alt=media&token=0159e16f-9cd1-4dd9-851d-fa3ad32a9896' />\n                </Modal>\n                <Modal isOpen={settingsModal} onRequestClose={()=>this.setState({settingsModal:false})} className='settings-modal'>\n                    <div className='settings-modal-inner'>\n                        {/* <div className='settings-modal-profile'>\n                            <img alt='profile' style={{height:120,width:120,borderRadius:50,marginBottom:20}} src={img ? img : user.profileImg}/>\n                            <input onChange={(e)=>this.onChange(e,this)} type='file'/>\n                        </div>\n                        <div className='settings-username'>\n                            <div>Username</div>\n                            <div><input ref={this.usernameRef} type='text'/></div>\n                            <div><button onClick={this.handleUsername}>Submit</button></div>\n                        </div> */}\n                        <div className='settings-fullname'>\n                            <div>Password</div>\n                            <div><input ref={this.passwordRef} type='password'/></div>\n                            <div><button onClick={this.handlePassword}>Submit</button></div>\n                        </div>\n                        <div className='settings-bio'>\n                            <div>Bio</div>\n                            <div><input ref={this.bioRef} type='text'/></div>\n                            <div><button onClick={this.handleBio}>Submit</button></div>\n                       \n                        </div>\n                    </div>\n                </Modal>\n            </>\n        )\n    }\n}\n\nconst styles = {\n    image:{\n        height:150,\n        width:150,\n        borderRadius:'50%'\n    },\n    username:{\n        fontSize:24,\n        fontWeight:360\n    },\n    fullName:{\n        fontWeight:550,\n        fontSize:15,\n        marginRight:20\n    },\n    bio:{\n        fontSize:13.5\n    },\n    icon:{\n        height:25,\n        width:25,\n        marginLeft:25\n    }\n}\n\nexport default withRouter(Profile);","import React from 'react'\nimport {db,} from '../../firebase';\nimport {updatePost} from '../../actions'\nimport Modal from 'react-modal'\nimport {Link} from 'react-router-dom'\n\n\nimport Postcard from '../Postcard/Postcard';\n\nimport './Feed.css';\n\nclass Feed extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            loading:true,\n            posts:[]\n        }\n    }\n\n    componentDidMount(){\n        let posts = [];\n        const {userId} = this.props;\n        db.collection('users').doc(userId).get().then((doc)=>{\n            const data = doc.data();\n            const {store} = this.props;\n            const following = [doc.id];\n            \n            for(var keys in data['following']) following.push(keys);\n            store.subscribe(()=>this.forceUpdate());\n            following.forEach((id,index)=>{\n                db.collection('users').doc(id).get().then((doc)=>{\n                    const data = doc.data();\n                    const username = data.username;\n                    const profileImg = data.profileImg;\n                    let post = data.posts.map((data)=>{\n                            return {...data,username,profileImg,userId:id}\n                    });\n                    posts.push(...post);\n                    \n                    \n                    if(index+1 === following.length){\n                        store.dispatch(updatePost(posts));\n                        this.setState({posts,loading:false});\n                    }\n                })\n            })\n        })\n    }\n\n    deletePost = (userId,key) => {\n        const {store} = this.props;\n        store.subscribe(()=>this.forceUpdate());\n        let posts = store.getState().postState;\n        const allPosts = posts.filter((p,i) => p.key!==key);\n        const deletedUserPosts = posts.filter((p,i) => p.userId===userId && p.key!==key);\n        db.collection('users').doc(userId).update({\n            posts:deletedUserPosts\n        });\n        store.dispatch(updatePost(allPosts));\n    }\n\n    modifyPost = (userId,key,caption,post) => {\n        const {store} = this.props;\n        store.subscribe(()=>this.forceUpdate());\n        post.caption = caption;\n        let posts = store.getState().postState;\n        const allPosts = posts.filter((p,i) => p.key!==key);\n        posts = posts.filter((p,i) => p.userId===userId && p.key!==key);\n        posts.push(post);\n        allPosts.push(post);\n        db.collection('users').doc(userId).update({\n            posts\n        });\n        store.dispatch(updatePost(allPosts));\n    }\n\n\n    render(){\n        const {loading} = this.state;\n        const {store,userId,username,profileImg} = this.props;\n        const posts = store.getState().postState;\n        posts.sort((a,b)=>b.time-a.time)\n        return(\n            <>\n                {!loading &&\n                    <div>\n                        {posts.map((post)=>{\n                            return <Postcard key= {post.key} username={username} modifyPost={this.modifyPost} deletePost={this.deletePost} userId={userId} posts={posts} post={post} profileImg={profileImg} store={store}/>\n                        })}\n                        {posts.length===0 && <div className='no-data'>\n                            <div>No Posts to show</div>\n                            <div><Link to='/add'>Create Post</Link></div>\n                        </div>}\n                    </div>\n                }\n                <Modal isOpen={loading}  className='loading-modal' >\n                    <img alt='loading' src='https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/Icons%2Floading.svg?alt=media&token=0159e16f-9cd1-4dd9-851d-fa3ad32a9896' />\n                </Modal>\n            </>\n        )\n    }\n}\n\nexport default Feed;","let defaultState = []\n\nexport const bookmarkReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_BOOKMARK':\n            return action.bookmarks;\n        default:\n            return state;\n    }\n}","let defaultState = []\n\nexport const feedReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_FEED':\n            return action.feed;\n        default:\n            return state;\n    }\n}","let defaultState = []\n\nexport const postReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_POST':\n            return action.posts;\n        default:\n            return state;\n    }\n}","let defaultState = []\n\nexport const storyReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_STORY':\n            return action.stories;\n        default:\n            return state;\n    }\n}","let defaultState = []\n\nexport const upvoteReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_UPVOTE':\n            return action.upvotes;\n        default : \n            return state;\n    }\n}","let defaultState = {};\n\nexport const userReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_USER': \n            return action.user;\n        default : \n            return state;\n    }\n}","let defaultState = [];\n\nexport const downvoteReducer = (state=defaultState,action) => {\n    switch(action.type){\n        case 'UPDATE_DOWNVOTE':\n            return action.downvotes;\n        default : \n            return state;\n    }\n}","import {bookmarkReducer} from './bookmarkReducer';\nimport {feedReducer} from './feedReducer';\nimport {postReducer} from './postReducer';\nimport {storyReducer} from './storyReducer';\nimport {upvoteReducer} from './upvoteReducer';\nimport {userReducer} from './userReducer';\nimport {combineReducers} from 'redux';\nimport {downvoteReducer} from './downvoteReducer';\nimport {loginReducer} from './loginReducer';\n\nexport const allReducers = combineReducers({\n    bookmarkState : bookmarkReducer,\n    feedState : feedReducer,\n    postState : postReducer,\n    storyState : storyReducer,\n    upvoteState : upvoteReducer,\n    downvoteState : downvoteReducer,\n    userState : userReducer,\n    loginModal : loginReducer\n})","export const loginReducer = (state=false,action) => {\n    switch(action.type){\n        case 'SHOW_LOGIN' :\n            return true\n        case 'UNSHOW_LOGIN' :\n            return false\n        default:\n            return false\n    }\n}","import React from 'react';\nimport './Login.css';\nimport {withRouter} from 'react-router'\nimport {auth} from '../../firebase';\nimport {Link} from 'react-router-dom';\n\nclass Login extends React.Component{\n    constructor(){\n        super();\n        this.emailRef = React.createRef();\n        this.passwordRef = React.createRef();\n        this.state = {\n            loading:true\n        }\n    }\n\n    componentDidMount(){\n        if(auth.currentUser===null){\n            this.setState({loading:false})\n        }\n    }\n\n    handleForm = (e) => {\n        e.preventDefault();\n        const email = this.emailRef.current.value;\n        const password = this.passwordRef.current.value;\n        this.emailRef.current.value='';\n        this.passwordRef.current.value='';\n        auth.signInWithEmailAndPassword(email,password).then((cred)=>{\n            this.props.history.push('/');\n        }).catch((err)=>{\n            alert(err.message);\n        })\n    }\n    \n    render(){\n        return(\n            <div className='login-main-outer'>\n                {!this.state.loading && <div className='login-main'>\n                    <div className='login-inner'>\n                        <div className='login-inner-image'>\n                            <img alt='instagram-logo' src='https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png' />\n                        </div>\n                        <div className='login-inner-second'>\n                            <form className='login-inner-form' onSubmit={this.handleForm}>\n                                <input ref={this.emailRef} type='email' placeholder='Email'></input>\n                                <input ref={this.passwordRef} type='password' placeholder='Password'></input>\n                                <button type='submit'>Log In</button>\n                            </form>\n                        </div>\n                        {/* <div className='login-inner-third'>\n                            <div>Log in with Facebook</div>\n                        </div>\n                        <div className='login-inner-fourth'>\n                            <div>Forgot Password?</div>\n                        </div> */}\n                    </div>\n                    <div className='login-signup'>\n                        <div>Don't have an account? <Link to='/signup'>Sign Up</Link></div>\n                    </div>\n                </div>}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import React from 'react';\nimport './Signup.css'\nimport {withRouter} from 'react-router';\nimport {Link} from 'react-router-dom';\nimport {auth, db,storage} from '../../firebase';\n\n\nclass Signup extends React.Component{\n    constructor(){\n        super();\n        this.emailRef = React.createRef();\n        this.passwordRef = React.createRef();\n        this.nameRef = React.createRef();\n        this.usernameRef = React.createRef();\n        this.state={img:'https://firebasestorage.googleapis.com/v0/b/instagram-clone-a3ccf.appspot.com/o/blank_profile.webp?alt=media&token=dcf458cf-247f-4cb5-8f25-459bc52dd20c'}\n    }\n    \n    handleForm = (e) => {\n        e.preventDefault();\n        const email = this.emailRef.current.value;\n        const password = this.passwordRef.current.value;\n        const name = this.nameRef.current.value;\n        let username = this.usernameRef.current.value;\n        username = username.toLowerCase();\n        db.collection('users').where('username','==',username).get().then((snapshot)=>{\n            if(snapshot.empty === true){\n                if(username!=='' && password!=='' && name!=='' && username.length>5){\n                    this.emailRef.current.value='';\n                    this.passwordRef.current.value='';\n                    this.nameRef.current.value='';\n                    this.usernameRef.current.value='';\n                    auth.createUserWithEmailAndPassword(email,password).then((cred)=>{\n                        cred.user.updateProfile({\n                            photoURL:this.state.img,\n                            displayName:username\n                        })\n                        const newUserData = {\n                            bio:'',\n                            bookmarks:[],\n                            downvotes:[],\n                            followers:{},\n                            following:{'cYTjXhkqXON1CqFkznHEZwUJwWm1':true,'XgtNb5mWm6VWy20x8WUANSuVZHG2':true,'9bCOdTirOhPV1gGh93qqU061Cp13':true},\n                            fullName:name,\n                            noOfFollowers:0,\n                            noOfFollowing:0,\n                            noOfPosts:0,\n                            posts:[],\n                            profileImg:this.state.img,\n                            stories:[],\n                            upvotes:[],\n                            username\n                        };\n                        db.collection('users').doc(cred.user.uid).set(newUserData).then(()=>this.props.history.push('/'));\n                        db.collection('users').doc('cYTjXhkqXON1CqFkznHEZwUJwWm1').get().then((doc)=>{\n                            let followers = doc.data().followers;\n                            followers[cred.user.uid] = true;\n                            db.collection('users').doc('cYTjXhkqXON1CqFkznHEZwUJwWm1').update({followers});\n                        })\n                        db.collection('users').doc('XgtNb5mWm6VWy20x8WUANSuVZHG2').get().then((doc)=>{\n                            let followers = doc.data().followers;\n                            followers[cred.user.uid] = true;\n                            db.collection('users').doc('XgtNb5mWm6VWy20x8WUANSuVZHG2').update({followers});\n                        })\n                        db.collection('users').doc('9bCOdTirOhPV1gGh93qqU061Cp13').get().then((doc)=>{\n                            let followers = doc.data().followers;\n                            followers[cred.user.uid] = true;\n                            db.collection('users').doc('9bCOdTirOhPV1gGh93qqU061Cp13').update({followers});\n                        })\n                    })\n                }else{\n                    if(username.length<6){\n                        alert('Username must consist of 6 or more characters');\n                    }\n                    else if(password===''){\n                        alert('Password can not be empty');\n                    }\n                    else if(name===''){\n                        alert('Name can not be empty');\n                    }\n                }\n            }\n            else{\n                alert('Username not available')\n            }\n        })\n\n    }\n\n\n    onChange = (e,s) => {\n        if(e.target.files.length>0){\n            let reader = new FileReader();\n            const file = e.target.files[0];\n            reader.onload = function (f) {\n                if(f.target.result.substring(5,10)==='image'){\n                    const storageRef = storage.ref();\n                    const username = this.usernameRef!==undefined ? this.usernameRef.current.value : '' ;\n                    const d = new Date();\n                    const time = d.getTime();\n                    const fileRef = storageRef.child(`${username}${time}.`+file.name.split('.')[1]);\n                    fileRef.put(file).then((x)=>{\n                        const bucket = x.ref._delegate.bucket;\n                        const fileName = x.ref._delegate.fullPath;\n                        const url = `https://firebasestorage.googleapis.com/v0/b/${bucket}/o/${fileName}?alt=media`;\n                        s.setState({img:url})\n                    })\n                }\n            }\n            reader.readAsDataURL(e.target.files[0]);}\n    }\n\n    render(){\n        const {img} = this.state;\n        return(\n            <div className='login-main-outer'>\n                <div className='login-main'>\n                    <div className='login-inner'>\n                        <div className='login-inner-image'>\n                            <img alt='instagram-logo'  src='https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png' />\n                        </div>\n                        <div className='settings-modal-profile'>\n                            <img alt='profile' style={{height:120,width:120,borderRadius:50,marginBottom:20}} src={img}/>\n                            <input onChange={(e)=>this.onChange(e,this)} type='file'/>\n                        </div>\n                        <div className='login-inner-second'>\n                            <form onSubmit={this.handleForm} className='login-inner-form'>\n                                <input ref={this.emailRef} type='email' placeholder='Email'></input>\n                                <input ref={this.nameRef} type='text' placeholder='Full Name'></input>\n                                <input ref={this.usernameRef} type='text' placeholder='Username'></input>\n                                <input ref={this.passwordRef} type='password' placeholder='Password'></input>\n                                <button>Sign up</button>\n                            </form>\n                        </div>\n                        {/* <div className='login-inner-third'>\n                            <div>Log in with Facebook</div>\n                        </div> */}\n                    </div>\n                    <div className='login-signup'>\n                        <div>Have an account? <Link to='/'>Log in</Link></div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Signup);","import {Route} from 'react-router-dom';\nimport {createStore} from 'redux';\nimport {useState} from 'react';\nimport Navbar from './Components/Navbar/Navbar'\nimport CreatePost from './Components/Add/CreatePost';\nimport Story from './Components/Story/Story';\nimport Profile from './Components/Profile/Profile'\nimport Feed from './Components/Feed/Feed';\nimport './Components/Upvote/Upvote.css'\n\n\nimport {allReducers} from './Reducer/index.js';\nimport { db, auth } from './firebase';\nimport { updateBookmark, updateDownvote, updateUpvote, updateUser } from './actions';\n// import Upvote from './Components/Upvote/Upvote';\n// import Bookmark from './Components/Bookmark/Bookmark';\nimport Login from './Components/Login/Login';\nimport Signup from './Components/Signup/Signup';\n\n// const username='n1xk_1001';\n// const userId = 'EV76L1NABEXNFAXds1S9';\n// const profileImg = 'https://instagram.fdel7-1.fna.fbcdn.net/v/t51.2885-19/s320x320/159160457_146084750715468_3195586082150224567_n.jpg?tp=1&_nc_ht=instagram.fdel7-1.fna.fbcdn.net&_nc_ohc=S1LFJjR_pjIAX_lkCkd&edm=ABfd0MgAAAAA&ccb=7-4&oh=c5bc07d92f34cf46c00667282f38fcdc&oe=6094C221&_nc_sid=7bff83';\n\n\n\n\n\nfunction App() {\n  const [userId,setUserId] = useState('');\n  const [profileImg,setProfileImg] = useState('');\n  const [username,setUsername] = useState('');\n  const [loading,setLoading] = useState(true);\n  const store = createStore(allReducers);\n  let upvoteState = [], downvoteState = [], bookmarkState = [];\n  auth.onAuthStateChanged((user)=>{\n    if(user){\n      setLoading(false);\n      setUserId(user.uid);\n      setProfileImg(user.photoURL);\n      setUsername(user.displayName);\n      db.collection('users').doc(user.uid).get().then((doc)=>{\n        const data = doc.data();\n        upvoteState = data.upvotes;\n        downvoteState = data.downvotes;\n        bookmarkState = data.bookmarks;\n        store.dispatch(updateUser(data));\n        store.dispatch(updateUpvote(upvoteState));\n        store.dispatch(updateDownvote(downvoteState));\n        store.dispatch(updateBookmark(bookmarkState));\n      })\n    }else{\n      setLoading(false);\n      setUserId('');\n      setProfileImg('');\n      setUsername('');\n    }\n  })\n  return (\n   <> { !loading && <>\n    {userId &&  <div>\n        <Route exact path='/' ><Navbar/></Route>\n        <Route exact path='/add' ><Navbar/></Route>\n        <Route exact path='/profile' ><Navbar/></Route>\n        {/* <Route exact path='/upvotes' ><Navbar/></Route> */}\n        {/* <Route exact path='/bookmarks' ><Navbar/></Route> */}\n        <Route path='/profile-:username'><Navbar/></Route>\n        <Route exact path='/' >{<Story store={store} username={username} userId={userId} profileImg={profileImg}/>}</Route>\n        <Route exact path='/add' >{<CreatePost username={username} userId={userId}/>}</Route>\n        <Route exact path='/' >{<Feed store={store} username={username} userId={userId} profileImg={profileImg}/>}</Route>\n        <Route exact path='/profile'><Profile store={store} userId={userId} username={username} profileImg={profileImg}/></Route>\n        {/* <Route exact path='/upvotes'><Upvote store={store} userId={userId}/></Route> */}\n        {/* <Route exact path='/bookmarks'><Bookmark store={store} userId={userId} /></Route> */}\n        {/* <Route exact path='/profile-:username'><Profile store={store} userId={userId} username={username} profileImg={profileImg}/></Route> */}\n        <Route\n          path=\"/profile-:username\"\n          render={props => {\n            const {\n              match: {\n                params: { username}\n              }\n            } = props;\n            return (\n              <Profile\n                key={`username=${username}`}\n                store={store} userId={userId} username={username} profileImg={profileImg}\n                {...props}\n              />\n            );\n          }}\n        />\n      </div>}\n      {(auth.X===undefined || auth.X===null ) && <>\n        <Route exact path='/'><Login /></Route>\n        <Route exact path='/signup'><Signup /></Route>\n      </>}\n    </>} </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter as Router} from 'react-router-dom';\nimport './index.css';\nimport App from './App';\n\n\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n  <Router name='nikhil'>\n    <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}